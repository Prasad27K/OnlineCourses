<!-- Syllubas Items -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Add Syllabus</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<link rel="stylesheet" href="OnlineCourses.css"></link>
</head>
<body>
	<div id="mainCard">
		
		<div id="card" class="include">
			<div id="header"><button id="addCourse" class="btn btn-info" onclick="addCource(addCourseForm)">Add Course</button></div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var syllabusItems = [];
	var courseItem = {};
	var flag = 0;
	var addCourseForm = (`<div id="addCourseForm" class="addCourseForm">
		<fieldset class="scheduler-border">
		<legend class="scheduler-border">Syllabus Title</legend>
		<input id="Title" class="input-field" type="text" name="text" placeholder="Syllabus-title">
		</fieldset>
		<fieldset>
		<legend>Syllabus description</legend>
		<input id="Description" class="input-field" type="text" name="text" placeholder="Syllabus description ">
		</fieldset>
		<fieldset>
		<legend>Learning objective</legend>
		<input id="Objective" class="input-field" type="text" name="text" placeholder="Syllabus objective">
		</fieldset>
		<button id="saveCourse" class="btn btn-info">Save</button>
		<button id="cancel" class="btn btn-info">Cancel</button>
		</div>`);
	function addCource(addCourseForm)
	{
		$(".include").append(addCourseForm);
	}

	$(document).on('click', '#cancel', function() {
		$(this).parent().remove();
	});
	
	$(document).on('click', '#saveCourse', function()
	{
		courseItem = {};
		readInputValues();
   		syllabusItems.push(courseItem);
		console.log(syllabusItems);
		reRenderCads(syllabusItems);
		$(this).parent().remove();
	});

	function readInputValues()
	{
		$('#addCourseForm input').each(function()
		{
			let id = $(this).attr("id");
			let value = $(this).val();
		    if (value != '')
		    {
		        courseItem[id] = value;
		    }
		})
	}
	function reRenderCads(syllabusItems)
	{
		$(".contents").remove();
		let counter = 0;
		for( const obj of syllabusItems)
		{
			$("#card").append(`<div class="contents">
								<label id="index">${(counter + 1)}</label>
								<label class="cardContent">${obj.Title}<br>${obj.Description}</label> 
								<a href="#" id="delete" onclick="deleteCourse(${counter})">delete</a>
								<a href="#" id="edit${counter}"  onclick="editCourseForm(${counter})">Edit</a>
								</div>`);
			counter++;
		}
	}

	function deleteCourse(index)
	{
		const ok = confirm("Are you sure to Delete?");
		if(ok)
		{
			syllabusItems.splice(index, 1);
			reRenderCads(syllabusItems);
		}
	}
		
	function editCourseForm(index)
	{
		const obj = syllabusItems[index];

		$("#edit" + index).parent().replaceWith(addCourseForm);
		// $('#Title').attr('id', `Title${index}`);
		// $('#Description').attr('id', `Description${index}`);
		// $('#Objective').attr('id', `Objective${index}`);

		$('#Title').val(obj.Title);
		$('#Description').val(obj.Description);
		$('#Objective').val(obj.Objective);
		
		$('#saveCourse').attr('id', `editCourse${index}`);
		$(`#editCourse${index}`).attr('onclick', `editCourse(${index})`);
		$('#addCourseForm').attr('id', `addCourseForm${index}`);
	}

	function editCourse(index)
	{
		syllabusItems[index] = {Title: $('#Title').val(), Description: $('#Description').val(), Objective: $('#Objective').val()};
		console.log(syllabusItems);
		console.log(courseItem);
		reRenderCads(syllabusItems);
		$(`#editCourse${index}`).parent().remove();	
	}

</script>
</html>